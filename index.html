<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Dad Joke Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            height: 100vh;
            margin: 0;
            overflow: hidden; /* Prevent scroll on mobile */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        h1, h2, h3 {
            font-family: 'Fredoka', sans-serif;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glassmorphism Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn:active {
            transform: scale(0.95);
        }

        /* Custom scrollbar for question text if it gets too long on small screens */
        .scroll-content::-webkit-scrollbar {
            width: 6px;
        }
        .scroll-content::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1); 
        }
        .scroll-content::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3); 
            border-radius: 10px;
        }

        /* Confetti Animation */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        /* Winning Son Door Animation */
        .door-container {
            perspective: 1000px;
        }
        .door {
            transform-origin: left;
            transition: transform 1s ease-in-out;
        }
        .door-open {
            transform: rotateY(-120deg);
        }
    </style>
</head>
<body>

    <!-- Main Container -->
    <div class="relative w-full max-w-md px-4">
        
        <!-- Quiz Card -->
        <div id="quiz-card" class="glass-card w-full p-6 min-h-[500px] flex flex-col justify-between relative overflow-hidden">
            
            <!-- Header -->
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold shadow-lg">
                        <i class="fas fa-laugh-squint"></i>
                    </div>
                    <span class="text-white font-bold text-lg drop-shadow-md">Dad Joke Central</span>
                </div>
                <div class="text-white/80 text-sm font-mono bg-black/10 px-3 py-1 rounded-full border border-white/20">
                    <span id="current-q-num">1</span> / <span id="total-q-num">20</span>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-black/10 h-2 rounded-full mb-6 overflow-hidden">
                <div id="progress-bar" class="h-full bg-gradient-to-r from-yellow-300 to-pink-500 transition-all duration-500 ease-out" style="width: 5%"></div>
            </div>

            <!-- Question Area -->
            <div class="flex-grow flex items-center justify-center mb-8 scroll-content overflow-y-auto max-h-40">
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-white text-center leading-tight drop-shadow-sm">
                    Loading joke...
                </h2>
            </div>

            <!-- Options Grid -->
            <div id="options-grid" class="grid grid-cols-1 gap-3">
                <!-- Buttons injected by JS -->
            </div>

            <!-- Feedback Overlay (Hidden by default) -->
            <div id="feedback-overlay" class="absolute inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300 z-10 rounded-20px">
                <div class="transform scale-50 transition-transform duration-300" id="feedback-content">
                    <div class="bg-white text-gray-800 px-8 py-6 rounded-2xl shadow-2xl text-center">
                        <i id="feedback-icon" class="text-5xl mb-3 block"></i>
                        <h3 id="feedback-text" class="text-2xl font-bold"></h3>
                    </div>
                </div>
            </div>

        </div>

        <!-- Result Card (Hidden Initially) -->
        <div id="result-card" class="glass-card w-full p-6 hidden flex-col items-center text-center animate-fade-in">
            
            <h1 class="text-4xl font-black text-white mb-2 drop-shadow-md">GAME OVER</h1>
            
            <!-- "Are Ya Winning Son?" Visual -->
            <div class="door-container w-48 h-48 bg-gray-800 rounded-lg border-4 border-gray-700 relative mb-6 overflow-hidden shadow-2xl mt-4 group cursor-pointer" onclick="this.querySelector('.door').classList.toggle('door-open')">
                <!-- Inside the room (Dad) -->
                <div class="absolute inset-0 flex items-center justify-center bg-yellow-100">
                    <div class="text-center">
                        <!-- Simple SVG Stick Figure Dad -->
                        <svg width="100" height="120" viewBox="0 0 100 120" class="mx-auto">
                            <circle cx="50" cy="20" r="15" fill="black" /> <!-- Head -->
                            <line x1="50" y1="35" x2="50" y2="80" stroke="black" stroke-width="4" /> <!-- Body -->
                            <line x1="50" y1="45" x2="20" y2="65" stroke="black" stroke-width="4" /> <!-- Arm L -->
                            <line x1="50" y1="45" x2="80" y2="25" stroke="black" stroke-width="4" /> <!-- Arm R (Waving) -->
                            <line x1="50" y1="80" x2="30" y2="110" stroke="black" stroke-width="4" /> <!-- Leg L -->
                            <line x1="50" y1="80" x2="70" y2="110" stroke="black" stroke-width="4" /> <!-- Leg R -->
                            <rect x="40" y="5" width="20" height="10" fill="gray" /> <!-- Hat -->
                        </svg>
                        <p class="font-bold text-gray-800 text-sm mt-1">DAD</p>
                    </div>
                </div>
                <!-- The Door -->
                <div class="door absolute inset-0 bg-amber-800 border-r-4 border-amber-900 flex items-center">
                    <div class="w-3 h-3 rounded-full bg-yellow-400 ml-4 shadow-sm border border-yellow-600"></div>
                </div>
            </div>

            <h2 class="text-3xl font-bold text-yellow-300 mb-2 drop-shadow-sm">"Are ya winning, son?"</h2>
            
            <p class="text-white text-lg mb-6">
                You scored: <span id="final-score" class="font-bold text-2xl text-green-300">0</span> / 20
            </p>

            <div id="score-message" class="bg-white/20 p-4 rounded-xl text-white italic mb-6 text-sm border border-white/10">
                <!-- Dynamic insult/compliment -->
            </div>

            <button onclick="restartGame()" class="w-full bg-white text-purple-600 font-bold py-4 rounded-xl hover:bg-purple-50 transition transform active:scale-95 shadow-lg">
                Play Again
            </button>
        </div>

    </div>

<script>
    /**
     * DAD JOKE DATABASE
     * A mix of classics, puns, and dark humor.
     */
    const jokes = [
        {
            q: "I'm afraid for the calendar.",
            a: "Its days are numbered.",
            options: ["It has no dates.", "It's stuck in the past.", "It's weak on weekends."]
        },
        {
            q: "Why don't skeletons fight each other?",
            a: "They don't have the guts.",
            options: ["They have no bone to pick.", "They are too rattled.", "They lack the muscle."]
        },
        {
            q: "My wife told me to stop impersonating a flamingo.",
            a: "I had to put my foot down.",
            options: ["I flew off the handle.", "I turned pink.", "I stood my ground."]
        },
        {
            q: "What is red and bad for your teeth?",
            a: "A brick.",
            options: ["Red velvet cake.", "A mars bar.", "Cherry soda."]
        },
        {
            q: "Why did the scarecrow win an award?",
            a: "He was outstanding in his field.",
            options: ["He had a lot of brains.", "He worked hard.", "He was straw-ng."]
        },
        {
            q: "I bought some shoes from a drug dealer.",
            a: "I don't know what he laced them with, but I've been tripping all day.",
            options: ["They were high heels.", "They were addictive.", "They cost a fortune."]
        },
        {
            q: "Why did the old man fall in the well?",
            a: "Because he couldn't see that well.",
            options: ["He slipped on a coin.", "He was looking for water.", "Gravity."]
        },
        {
            q: "What do you call a fake noodle?",
            a: "An Impasta.",
            options: ["A phon-oodle.", "Fettuccini Lies.", "Artificialente."]
        },
        {
            q: "I have a joke about construction...",
            a: "But I'm still working on it.",
            options: ["It's groundbreaking.", "It's concrete.", "It needs more support."]
        },
        {
            q: "Why can't you hear a pterodactyl go to the bathroom?",
            a: "Because the 'P' is silent.",
            options: ["They are extinct.", "They use the sky.", "They are very polite."]
        },
        {
            q: "What's the difference between a hippo and a Zippo?",
            a: "One is heavy, the other is a little lighter.",
            options: ["One swims, one burns.", "One eats grass, one eats gas.", "About 2000 pounds."]
        },
        {
            q: "Why do we tell actors to 'break a leg'?",
            a: "Because every play has a cast.",
            options: ["So they get insurance.", "To wish them luck.", "Because theater is brutal."]
        },
        {
            q: "Did you hear about the kidnapping at school?",
            a: "It's fine, he woke up.",
            options: ["The police are investigating.", "They paid the ransom.", "The teacher did it."]
        },
        {
            q: "What constitutes a family in biology?",
            a: "Wait, I think that's the wrong website.",
            options: ["Genes and chromosomes.", "Parents and offspring.", "Related organisms."]
        },
        {
            q: "Parallel lines have so much in common.",
            a: "It’s a shame they’ll never meet.",
            options: ["They are identical.", "They go the same way.", "They are straight."]
        },
        {
            q: "My wife is really mad at the fact that I have no sense of direction.",
            a: "So I packed up my stuff and right.",
            options: ["I left the house.", "I got lost immediately.", "I bought a GPS."]
        },
        {
            q: "Why don't scientists trust atoms?",
            a: "Because they make up everything.",
            options: ["They are unstable.", "They are too small.", "They split too easily."]
        },
        {
            q: "I visited the new cemetery today.",
            a: "People are dying to get in there.",
            options: ["It was dead silent.", "It was a grave mistake.", "The service was buried."]
        },
        {
            q: "What did the ocean say to the beach?",
            a: "Nothing, it just waved.",
            options: ["See you later.", "Shore looks nice.", "I'm tide of you."]
        },
        {
            q: "My grief counselor died the other day.",
            a: "He was so good, I didn't even care.",
            options: ["I was devastated.", "I need a new one.", "It was tragic."]
        }
    ];

    /**
     * STATE MANAGEMENT
     */
    let currentQuestionIndex = 0;
    let score = 0;
    let shuffledQuestions = [];

    // DOM Elements
    const quizCard = document.getElementById('quiz-card');
    const resultCard = document.getElementById('result-card');
    const questionText = document.getElementById('question-text');
    const optionsGrid = document.getElementById('options-grid');
    const currentQNum = document.getElementById('current-q-num');
    const totalQNum = document.getElementById('total-q-num');
    const progressBar = document.getElementById('progress-bar');
    const feedbackOverlay = document.getElementById('feedback-overlay');
    const feedbackContent = document.getElementById('feedback-content');
    const feedbackIcon = document.getElementById('feedback-icon');
    const feedbackText = document.getElementById('feedback-text');

    /**
     * UTILS
     */
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    /**
     * GAME LOGIC
     */
    function initGame() {
        score = 0;
        currentQuestionIndex = 0;
        
        // Deep copy and shuffle jokes
        shuffledQuestions = jokes.map(j => ({...j})).sort(() => Math.random() - 0.5);
        
        // Update total count display
        totalQNum.innerText = shuffledQuestions.length;
        
        // UI Reset
        quizCard.classList.remove('hidden');
        quizCard.classList.add('flex');
        resultCard.classList.add('hidden');
        resultCard.classList.remove('flex');
        
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQuestionIndex >= shuffledQuestions.length) {
            endGame();
            return;
        }

        const qData = shuffledQuestions[currentQuestionIndex];
        
        // Update UI Text
        currentQNum.innerText = currentQuestionIndex + 1;
        questionText.innerText = qData.q;
        
        // Update Progress Bar
        const progress = ((currentQuestionIndex) / shuffledQuestions.length) * 100;
        progressBar.style.width = `${progress}%`;

        // Prepare Answers
        const allOptions = [
            { text: qData.a, isCorrect: true },
            { text: qData.options[0], isCorrect: false },
            { text: qData.options[1], isCorrect: false },
            { text: qData.options[2], isCorrect: false }
        ];

        // Shuffle Answers
        shuffleArray(allOptions);

        // Render Buttons
        optionsGrid.innerHTML = '';
        allOptions.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = `option-btn w-full bg-white text-gray-800 font-semibold py-4 px-4 rounded-xl shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-white/50 text-sm md:text-base`;
            btn.innerText = opt.text;
            btn.dataset.isCorrect = opt.isCorrect; 
            btn.onclick = (e) => handleAnswer(opt.isCorrect, e.target);
            optionsGrid.appendChild(btn);
        });
    }

    function handleAnswer(isCorrect, clickedBtn) {
        // Disable all buttons and highlight correct answer
        const btns = document.querySelectorAll('.option-btn');
        btns.forEach(b => {
            b.disabled = true;
            // Always highlight correct answer in green
            if (b.dataset.isCorrect === 'true') {
                 b.classList.remove('bg-white', 'text-gray-800', 'hover:bg-gray-50');
                 b.classList.add('bg-green-500', 'text-white', 'shadow-green-500/50');
            }
        });

        if (isCorrect) {
            score++;
            showFeedback(true);
        } else {
            showFeedback(false);
            // Highlight the clicked wrong answer in red
            clickedBtn.classList.remove('bg-white', 'text-gray-800', 'hover:bg-gray-50');
            clickedBtn.classList.add('bg-red-500', 'text-white');
        }

        setTimeout(() => {
            currentQuestionIndex++;
            loadQuestion();
        }, 2000); // 2 second delay to see the result
    }

    function showFeedback(isCorrect) {
        feedbackOverlay.classList.remove('opacity-0', 'pointer-events-none');
        feedbackContent.classList.remove('scale-50');
        feedbackContent.classList.add('scale-100');

        if (isCorrect) {
            feedbackIcon.className = "fas fa-check-circle text-green-500 text-5xl mb-3 block";
            feedbackText.innerText = "Nice!";
            feedbackText.className = "text-2xl font-bold text-green-600";
        } else {
            feedbackIcon.className = "fas fa-times-circle text-red-500 text-5xl mb-3 block";
            feedbackText.innerText = "Nope!";
            feedbackText.className = "text-2xl font-bold text-red-600";
        }

        // Hide after 1.5s (slightly shorter than total wait time)
        setTimeout(() => {
            feedbackOverlay.classList.add('opacity-0', 'pointer-events-none');
            feedbackContent.classList.add('scale-50');
            feedbackContent.classList.remove('scale-100');
        }, 1500);
    }

    function endGame() {
        quizCard.classList.add('hidden');
        quizCard.classList.remove('flex');
        resultCard.classList.remove('hidden');
        resultCard.classList.add('flex');

        document.getElementById('final-score').innerText = score;
        
        // Trigger Door Animation after a moment
        setTimeout(() => {
            document.querySelector('.door').classList.add('door-open');
        }, 800);

        // Generate Message
        const msgBox = document.getElementById('score-message');
        if (score === 20) {
            msgBox.innerText = "The ultimate Dad. Your jokes are terrible. Good job.";
            startConfetti();
        } else if (score > 15) {
            msgBox.innerText = "Solid effort, sport. You've definitely groaned at a few of these before.";
        } else if (score > 10) {
            msgBox.innerText = "Not bad, but you might need to check your pun-alignment.";
        } else {
            msgBox.innerText = "Are you sure you're winning? That score says otherwise.";
        }
    }

    function restartGame() {
        initGame();
        // Close door for next time
        document.querySelector('.door').classList.remove('door-open');
    }

    function startConfetti() {
        for(let i=0; i<50; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
            confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
            document.body.appendChild(confetti);
            
            // Cleanup
            setTimeout(() => confetti.remove(), 5000);
        }
    }

    // Start
    initGame();

</script>
</body>
</html>
